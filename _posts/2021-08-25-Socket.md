---
title:  Socket 소켓 통신 및 네트워크 개념
author: Kim
date: 2021-08-25 06:00:00 +0900
categories : [Java]
tags: [Java]
---

# 네트워크

네트워크의 정의는 A디바이스 B디바이스가 각각 존재한다고 가정할 때 서로 연결되어서<br>
데이터를 주고받고 옮겨가는 이 자체를 네트워크라고 볼 수 있습니다<br>

즉 서로 다른 디바이스 2개가 연결되어 있는 자체를 네트워크라고 부르며 각각 Host라고<br>
명시해줄 수 있고 만약 호스트명 이라고 할때 디바이스의 이름을 기억해둘 수 있겠습니다.<br>

# IP 와 Protocol

컴퓨터를 사용하다가보면 IP 라는 단어를 한번쯤 들어보거나 실제 무엇을 의미하는지<br>
알고있습니다 그러면 Protocol 은 무엇을 의미하는 것 일까요?<br>

흔히 Protocol 이라고 하면 통신의 전송규약 및 통신규약 이라고 하는데 이것을 다른 예로 들어보면<br>

A 라는 사람은 대한민국 사람이며 잘 나가는 사업가 입니다 다음 B라는 프랑스 사람이 A에게<br>
투자를 하겠다고 했습니다 하지만 A는 한국어를 사용하고 B는 프랑스어를 사용하기때문에<br>
이들의 의사소통을 하기위해 중매할것이 필요한데 곰곰히 생각해보니<br>
영어를 사용하게되면 이들의 의사소통이 잘 이루어질 수 있지 않을까요?<br>

Protocol이 바로 이런 역할을 담당합니다 즉 A와 B의 의사소통이 진행되기 위한 하나의 중계자 같은것입니다<br>

IP는 목적지로 데이터를 전송하기 위해 `'중간'`에 어떤 경로로 거쳐갈 것인지 정해주는 Protocol 입니다<br>

# TCP & UDP

- (1) TCP : 데이터를 보내는 Protocol 유형중 하나이며 간혈적으로 데이터 손실이<br>
발생 할 수가 있습니다 예를들어 카카오톡으로 이미지를 보냈지만<br>
상대가 이미지를 받지 못했다고 하는 경우가 발생했을때 재전송 여부를 체크해줍니다<br>

※ TCP : 인터넷 프로토콜
※ TCP는 상대가 데이터를 제대로 받았는지 체크해주는 것이 TCP 입니다.<br>
※ 데이터 전송 시 연결형에 신뢰성을 가진 전송 프로토콜 <br>

- (2) UDP : 상대가 데이터를 제대로 받았는지 상황여부를 따지지않으며 데이터를 보냅니다<br>
※ UDP : 사용자 데이터그램 프로토콜<br>
※ TCP와의 반대개념을 가진 비신뢰성의 프로토콜<br>

정리<br>

TCP 같은 경우는 패킷(데이터) 손실시 다시 재전송을 보낼수 있어 신뢰성을 가진 프로토콜<br>
UDP는 상황 여부를 신경쓰지 않으며 재전송 없이 보내기만 하는 프로토콜<br>

## TCP 예시

위 내용을 가지고 TCP를 예를들어 보겠습니다 만약에 상대방에게 전화를 걸어야 하는 상황이 생겼습니다<br>
발신버튼을 누르면 착신음이 울리게 되는데 상대방이 전화를 받기 전까지는 연결이 절대 이루어 질 수<br>
없습니다 상대방이 전화를 받기전까지는 착신음만 울릴뿐 입니다 나중에서야 상대방이 전화를 받았다는 것을<br>
알게되면 서로 소통을 하게 되는 것이죠<br>

여기서 소통은 데이터로 비유해봤습니다 상대방이 전화를 받기 전 까지는 데이터를 전송자체를 하지않으며<br>
전화를 거부했거나 받은 순간이 없으면 이와 마찬가지 입니다<br>
반대로 전화를 받은순간이 오면 데이터를 주고받을 수 있다 라는 예시 입니다<br>

## UDP 예시

이번에 UDP는 간단한 예로 카카오톡으로 상대방에게 메시지를 입력하고<br>
전송버튼을 누르면 상대방이 보낸메세지를 제대로 받았는지 안받았는지는 크게 신경쓰지는 않습니다<br>
단순히 데이터를 송신하는 기능을 사용한 것 인데 UDP가 바로 이런 역할을 합니다<br>

이렇게 TCP 와 UDP 각각 주어지는 역할이 있습니다 TCP는 전송하는 데이터가 제대로 전송되는지<br>
체크해주는 역할이 있고 UDP는 보내야할 데이터를 바로바로 송신하는 역할이 있습니다<br>

# 네트워크 통신

그럼 통신은 어떤 알고리즘으로 데이터를 전송하거나 받을 수 있는지 알아보겠습니다<br>

<img src ="/post/Java/socket.png"><br>
<a href = "https://mainpower4309.tistory.com/m/21?category=769330">참고한 블로그</a><br>

통신 알고리즘은 초기에는 OSI 7계층으로 이루어졌다고 합니다 시간이 흘러 7단계는 너무 복잡하여<br>
TCP를 이용한 4계층이 탄생이되었지만 이 마저도 더 효율적인 방법으로 구현한것이<br>
앞으로 진행해볼 소켓 프로그래밍이 되었다고 합니다<br>

초기에는 OSI 7 계층이 개발되었고 시간이 흘러 TCP 4계층이 생겼는데 이 모든것을 압축해서 나온것이<br>
소켓 이라는 이름이 탄생된걸 보면 그저 감탄만 나오네요..<br> 

※ OSI : Open System Interconnection 즉, 개방형 시스템간 상호 접속을 의미합니다<br>


# 소켓(Socket)

네트워크 통신을 할 수 있는 방법으로 프로세스간의 연결의 종점이라고 볼 수 있습니다<br>

아래 그림을 보며 개념을 익혀보도록 하겠습니다<br>

<img src ="/post/Java/socket2.png"><br>
<a href = "https://reakwon.tistory.com/81">[리눅스] 소켓 개념과 예제</a><br>

- Application Layer :  응용 프로그램 계층

- TransPort Layer : 전송 계층

- IP Layer :  IP 계층

- Network Access Layer : 네트워크 계층(물리계층)

위 그림은 TCP/IP에서의 통신하는 과정을 담은 그림입니다<br>

<strong>클라이언트</strong><br>

- 네트워크 계층 주소 : DD-44-EE-55-FF-66
- 논리적주소 : 10.2.2.2
- TCP포트번호 : 12345

<strong>서버</strong><br>

- 네트워크 계층 주소 : 11-AA-22-BB-33-CC
- 논리적주소 : 10.1.1.3
- TCP포트번호 : 80

※ 클라이언트 와 서버가 연결되어있는 모습<br>

## TCP를 이용해서 서버와 통신하는 프로그램 만들기.

위 그림을 통해 서버 와 클라이언트가 연결되어서 통신한다는것을 알게됐습니다<br>
이제 만들어볼것은 서버와 통신을 해서 소켓 개념을 익혀보는 것 입니다<br>
서버전용 클래스 , 클라이언트전용 클래스가 필요하며 두 클래스 모두 메인 프로그램을 만들어 줍니다<br>

- 서버가 기본적으로 해야할 일 : ServerSocket 클래스를 이용하여 클라이언트의<br>
연결을 대기합니다 대기하는 메소드는 accept()가 그 역할을 진행하고 연결이 성립될 때 까지<br>
계속 대기합니다 연결이 성립되면 통신하기 위해 Socket 객체를 클라이언트에게 넘겨주면서<br>
실제 통신이 이루어 질수 있도록 해야합니다.<br>













